{"version":3,"sources":["scripts/EosSubSig.js","img/setting.png","img/home.png","img/chat.png","img/graph.png","Component/Setting/Password.jsx","scripts/config.js","scripts/PCSServer.js","scripts/Scatter.js","Component/Setting/Airdrop.jsx","Component/Header/Header.jsx","Component/Setting/Setting.jsx","App.js","serviceWorker.js","redux/reducers.js","redux/store.js","index.js","scripts/Aws.js","redux/actions.js","scripts/EosHttpApi.js"],"names":["EosSubSig","symbol","Object","_var_www_html_pcs_proxy_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","this","nftId","passWord","Aws","genSalt","Number","salt","length","window","alert","privateKey","ecc","seedPrivate","concat","publicKey","privateToPublic","response","subSig","JSON","parse","localStorage","getItem","id","_unused","Error","process","query","code","scope","table","lower_bound","limit","getTable","owner","rows","result","account","subkey","getLocalAuth","signature","genSig","getEOSAuth","console","error","_context3","t0","tokenId","message","getSubSigMessage","sign","checkRyodanSecurity","verified","upper_bound","community_table","isManager","realOwner","user","String","Math","floor","Date","module","exports","bin","num","Array","from","bn","BigInteger","isBigInteger","two","a_byte","pow","bytearray","v","i","divide","remainder","log","Buffer","uint64ToBuffer","Password","props","_this","_var_www_html_pcs_proxy_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_4__","_var_www_html_pcs_proxy_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__","_var_www_html_pcs_proxy_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__","call","state","toggle","bind","_var_www_html_pcs_proxy_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_9__","handleChange","refreshKey","resetReduxAuthority","setState","collapse","e","_var_www_html_pcs_proxy_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__","target","name","value","subsig","SubSig","subsig2","oldPassWord","newPassWord","newpassWord","genKeyPair","privateKey2","new_subkey","act_bin","encodeName","sym_bin","getSymbolCodeRaw","id_bin","sk_bin","publicKeyToBuffer","ts_bin","getTimestamp","message_bin","new_signature","apiObj","AgentEvent","symbolCode","newSubKey","PCSServer","requestSignTx","_context","dispatch","setAuthority","accountName","react__WEBPACK_IMPORTED_MODULE_10___default","a","createElement","reactstrap__WEBPACK_IMPORTED_MODULE_11__","xs","className","reactstrap__WEBPACK_IMPORTED_MODULE_12__","onClick","style","marginBottom","reactstrap__WEBPACK_IMPORTED_MODULE_13__","isOpen","reactstrap__WEBPACK_IMPORTED_MODULE_14__","reactstrap__WEBPACK_IMPORTED_MODULE_15__","reactstrap__WEBPACK_IMPORTED_MODULE_16__","for","reactstrap__WEBPACK_IMPORTED_MODULE_17__","type","onChange","placeholder","Component","public_key","pk_body","slice","raw_pk","Base58","decode","_var_www_html_pcs_proxy_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__","map","symbol_code","raw","c","multiply","add","charCodeAt","toString","now","timestamp","timstamp_micro","connect","AWS_SECURITY_API_URL","__webpack_require__","d","__webpack_exports__","PCSServer_PCSServer","sig","payload","contract","req","method","mode","cache","headers","Content-Type","body","stringify","fetch","json","res","apiUrl","options","data","errorMessage","signedTx","signedTransaction","transaction","_context2","password","seedHash","sha256","scatter","Scatter","node_url","arguments","undefined","port","chain","_var_www_html_pcs_proxy_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_5__","re","RegExp","match","_node_url$split","split","_node_url$split2","_var_www_html_pcs_proxy_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__","protocol","host","network","blockchain","chainId","mainnet","kylin","jungle","eosOptions","expireInSeconds","requiredFields","accounts","ScatterJS","plugins","ScatterEOS","eosJS","eos","Eos","connected","_var_www_html_pcs_proxy_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_6__","key","_connect","_var_www_html_pcs_proxy_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__","_var_www_html_pcs_proxy_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default","mark","_callee","appName","wrap","prev","next","sent","abrupt","setTimeout","stop","_x","apply","_login","_callee2","identity","login","find","x","t1","_logout","_callee3","logout","content","assign","_var_www_html_pcs_proxy_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__","_action","_callee4","_ref","contractName","actionName","params","txOptions","_context4","authorization","authority","_var_www_html_pcs_proxy_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","_scatterError","_x2","_transaction","_callee5","_len","actionList","_key","contractList","_args5","_context5","act","tx","forEach","_tx$contractName","replace","_send","_callee6","recipient","amount","memo","eosAmount","actObj","_context6","numToAsset","action","_x3","_x4","_x5","errorObj","decimal","toFixed","_callee7","_context7","React","Header","classCallCheck","possibleConstructorReturn","getPrototypeOf","switchHeader","assertThisInitialized","switchLobby","switchDex","switchCommunityContents","bool","react_default","Row","Col","tag","Link","to","textDecoration","src","home","alt","lobby","graph","inCommunity","Container","community","Setting","App","switchSetting","BrowserRouter","darkMode","Component_Header_Header","Component_Setting_Setting","setting","Boolean","location","hostname","combineReducers","theme","setItem","communityContents","dex","newState","chat","defineProperty","thread","contents","profile","modal","iconUrl","biography","price","eosjpy","nfteos","nftjpy","share","url","title","store","createStore","reducers","ReactDOM","render","es","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","AWS_API_URL","pageUrl","sym","ptag","noticecount","morethan","lessthan","list","indexOf","datetime","push","indexhash","redirect","href","hash","_getTable","_var_www_html_pcs_proxy_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","_var_www_html_pcs_proxy_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__"],"mappings":"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","file":"static/js/main.1dfe05ac.chunk.js","sourcesContent":["// EOSを使ったSubsig関連の処理をまとめたもの\nimport ecc from 'eosjs-ecc';\nimport Aws from \"./Aws\";\nimport { getTable } from \"./EosHttpApi\";\n\nexport default class EosSubSig {\n    constructor(symbol) {\n        this.symbol = symbol;\n    }\n\n    // パスワードとIDをもとに、公開鍵ペアを生成する\n    async genKeyPair(nftId, passWord) {\n\n        const symbol = this.symbol;\n        const salt = await Aws.genSalt(passWord, symbol, Number(nftId)); // サーバーを使ってソルトを生成\n        if(salt.length!==64){return window.alert(\"通信が上手く出来ていません\")}\n\n        const privateKey = ecc.seedPrivate(`${passWord}${salt}`); // e.g. 5K2YUVmWfxbmvsNxCsfvArXdGXm7d5DC9pn4yD75k2UaSYgkXTh\n        const publicKey = ecc.privateToPublic(privateKey); // e.g. EOS5cYvx6NBYNdcJUym9WydRRs6329UTzJgzKii8dESmw2ZaA4fEH\n        const response = {\n            \"privateKey\": privateKey,\n            \"publicKey\": publicKey\n        };\n        return response;\n    }\n\n    // ローカルストレージからSubsig秘密鍵を読み込む\n    getLocalAuth() {\n        let subSig = JSON.parse(localStorage.getItem(this.symbol));\n        try {\n            let id = subSig.id;\n            let privateKey = subSig.privateKey;\n            return {id, privateKey};\n        }\n        catch {\n            throw new Error(\"ローカルのSubsigキーの読み込みに失敗しました。\");\n        }\n    }\n\n    // 指定したトークンのPublicKeyとownerアカウントを取得する\n    async getEOSAuth(nftId) {\n        const code = process.env.REACT_APP_CONTRACT_ACCOUNT;\n        const query = {\n            \"code\": code,\n            \"scope\": this.symbol,\n            \"table\": \"token\",\n            \"lower_bound\": nftId,\n            \"limit\": 1\n        };\n\n        let response = await getTable(query); // Web Apiを使ってTableの内容を取得\n        let owner = response.rows[0].owner;\n\n        let result = { \"account\": owner, \"subkey\": response.rows[0].subkey }; // 必要な情報を抜き出す\n        return result;\n    }\n\n    // subkeyとsignatureを得る\n    async getSigAndSubkey() {\n        try {\n            const { id, privateKey } = this.getLocalAuth();\n            const signature = EosSubSig.genSig(privateKey);\n            const { subkey } = await this.getEOSAuth(id);\n            return { signature, subkey };\n        } catch (error) {\n            console.error(error);\n            return {\n                signature : \"\",\n                subkey: \"\"\n            }\n        }\n    }\n\n    async verifyAuth(tokenId, privateKey) {\n        // 署名用のメッセージを作成\n        const message = EosSubSig.getSubSigMessage();\n        // デジタル署名\n        const signature = ecc.sign(message, privateKey);\n\n        // 署名検証を行う\n        const verified = await Aws.checkRyodanSecurity(this.symbol, tokenId, signature, message);\n        return verified[\"verify\"];\n    }\n\n    // コミュニティ運営権限を持つNFTのIDリストを取得し運営者であるかを返す\n    async checkManager(nftId) {\n        const code = process.env.REACT_APP_CONTRACT_ACCOUNT;\n        const query = {\n            \"code\": code,\n            \"scope\": this.symbol,\n            \"table\": \"manager\",\n            \"lower_bound\": nftId,\n            \"upper_bound\": nftId,\n            \"limit\": 1\n        };\n        const community_table = await getTable(query);\n        const isManager = (community_table.rows.length === 1);\n        return isManager;\n    }\n\n    // 署名を生成して返す関数\n    static genSig(privateKey) {\n        const message = EosSubSig.getSubSigMessage();\n        const signature = ecc.sign(message, privateKey);\n        return signature;\n    }\n\n    // トークンの売り注文をしたアカウントを取得するための関数\n    async getSeller(nftId) {\n        const code = process.env.REACT_APP_CONTRACT_ACCOUNT;\n        const query = {\n            \"code\": code,\n            \"scope\": this.symbol,\n            \"table\": \"sellorder\",\n            \"lower_bound\": nftId,\n            \"upper_bound\": nftId,\n            \"limit\": 1\n        };\n        let result = await getTable(query); // Web Apiを使ってTableの内容を取得\n        let response = result.rows;\n\n        if (response.length === 0) {\n            return code;\n        }\n\n        let realOwner = response[0].user;\n        return realOwner;\n    }\n\n    static getSubSigMessage() {\n        const a_day = 24 * 60 * 60 * 1000;\n        const message = String(Math.floor(Number(new Date()) / a_day) * a_day);\n        return message;\n    }\n}\n\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADmElEQVRYR81XTWhcVRT+vjvB6EQjBBQVESsITa1uWxqELNIkc+4EqwU3ouhChC5sUdFdXbjSWqiKWNz4vwo2hcm5kwTRCFqLLiWtIpKNIG2xC41ZlMw7csOMTF7ey7w3VPCuZt79zne/e885955D9DG892cAPJoynVPVx8rSsaxBxIvIJZK3p2wvqeodZfn6EuC9XwdwU2qxNVW95boImJ6efqhSqXxpZp+FEI4BsC5i571vZS2kqukNUUROkXwCwMOqejFtt+0EvPejZvY1ydsi2Mzmh4aGDs/Ozl6L/2dmZnYnSbKNKM61Wq3dCwsLP8ff4+PjN1ar1VmS9TbPFefc2Pz8/C/dIrYIqNfr9ydJEhe/M6X0OzN7FcAhks9kHP8m3Mz+BvARgLMAXiO5r5vHzH7f2NgYW1paWu183yJARFZJ3lvWjyXxq6p6X6YA7/2bAF4sSVgWflJVX8oU0E6xD0g+XZa1CN7MPgkhPJUbA+0JJyJnSD5ShLQoxszOhhAOA0h6CYgXzUGSS73IzexXAL8BeJDkSA98XVW1Zxq23XCa5HM5hNeSJDkB4HSz2YyLx5S7uVqtvkLyZQA35Ni9p6pHegqo1Wp7nHM/AKimwWb2Z6vVOrC4uLiStYj3fq+ZfUtyOGN+LUmSfc1m88IWF3jv3wFwwMziEY7kGHfy/FgI4a2djlpEjpI8lYeJmwBwleRVAOfove++ZnfibjnnhhuNRnwHcsfExMStg4ODfwCo9IqhOF9YgJldDCHsKUIqIhdIjhbBFhYAYEVV9xYhFZEVkoXElhHQSpJkpNlsRh/mjlqtNuyci/4t7IK3AYwVDMKjIYSIzx0i8jzJ3EDtDkIz+2bbcxzTkOT3JIfKpuHU1NQDlUrlXKk0zMnn9wE8m3cRmdkb6+vrry8vL69FTK1WuzteXNflIoqEIlIn2djpqM0s+vlHkvcA2FUgOA+q6hdpXFZN+F89Rp+HEB7v+RiJyMcknyywo9IQM/swhBArqn9HuiI6SfKF0swlDMzsRAghPlqb4/9Vkk1OTu4aGBiIr9mWotTMzgM4TjJ2Q7FaSvcEm7vpFKUk58wsFqX7uw+nZ1Eawe3K+HynwChTljvnRhuNxk+Rp6+yvKM2NibOua8AfJrRmCDvBc1qTLz37wKI0V+sMSkSTzmt2V+qmlWI7EjZV28oIpc7nVOHPfo3hHBXkQ3kpmFRYxGZI3kohe+rPf8HnAybkz7UjOoAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACSklEQVRYR+2VMWxOURzFf4fESmJDkHSxacKuRKzUIDGgTbqKGkRMGCwiwWARiSIxGLA3QdOxkdRkEUGEScLahL+c574vt89776v2fRHy3am9993/Of//Oed+4i8vDRI/IiaAUxnGPUkzOeaaCETEqItJWqxrJCIuARezs8uSvNdbqyaQurueKp2tdub9gRGICI8xH63xZiRN5t11TiAiNgHPgWL0NctS7Jf0tfMJJL0NbhLl+pb+2JjtGdwkFtMdT2t3Ol+dB5LedysdvwLG0t6LDKT8bNK+SFMzicPAnxNo0NtxcsR6q58vkh+cmJWloEXvorOk8a5fKdTr9L9JVSfV84Vrlv4omdfGsEXvsTLzEXEUuJ8KnZT0OJGwQS1JrS+qxv2NQJveZh8R64ErwPlKsavABUk/0vQafZHfW0agQcebkqZTd5uBR8CBhhg+A45J+pK+7/teFAQiYifwpJJvR2w603sP8BTY1gBebn8Ejkh6mfniRkUS+2Jc0jtFhKNk8Dzf71OR4o2PiCngFrChD3h5vARMSXqQ+cLkd1Tei3ETsFb7soO5BG69DXgHOLFC4Opnt4HTkpaSL0xiGZYJePzu1K7N9faofcGjX8uyFJbE0nialuMMYIlHSw8Uj0qmt01ms9l0XSyb0prPZ74o8OpiuBX4AKzrAjmr8R3YLulTYwwTuxHgTcfgZbkRSW+HBP75CcxKOlTnkYiYBQ62+KcTDwwJDCfw/09gC/CwJUoLks41xPAasLfl7nFJn1sfogH9BjSW/Qn1JVRHB3DY8AAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADG0lEQVRYR+2WS8hVZRSGnxeUFMO8oJVBOWkgaIYoXUlBnRiEIKSIpmniwIEGUQOhCzWLqCARIm9pkINEB6IDQaXUULBU+A0KtRASISMUjKJeee3bsv/jUfYP+6CDFhzO+c737bWevda3LuIOi+6wfe5+ANtDgIeBB6Ex8L/ABeCspL9v5+WuHrA9FngNmA1MHoDhTlsBOQ7sBT6UdKnzwE0Atl8F3gWGlcMGfgZ+AfK7iURvvPZIDf4P4HVJn9YV3ACwPRjYCCwqB04BHwA7JeXhAYvtkcBcIC81qSjYDLwi6Z+s6wBfAAuBq8BKYJukpm98WzjbsbMMWAfcA2ySlPV/ALbz1luL8WclJW6ti+0ngP3AUGCppC0qt/wn4CFggaTtrVuuKbS9GPgcOA88GoD5wJfAUUkh7KmUcMTDjwPzA1DF/iVJCUPPxfZy4LOEPQB9wARglKTfO63bXpprkni1uPcA8CvQF4AYHSzp3i4GkjJLyv8vS8r6utj+CFhdlh9LWlPbC/Smst4iKet+YvuvXPoA/AlcljSmy6HvSyXMVqeRA8D08sxBSTNqAHXwE5IS706AeGBsAM6WijVEUqhuSHF/3iSFaIakAFUeSIGpPJKU2lnbi8EA3gf081ztzJXKA7uBOflI2tNJ2ou17ZT5AJyOB1YBnwDbJS3ohcEu7n8G+Ab4KgD3A+eAtN3HJKUH9FRsvwW8DaypSvF7wNoCMqVbOrZJZPtkaU4TK4A0iK+BacCPwPOS8t262H4KOBx7kp6rd8Ok4cFSlJKa60vqZRZoTWwfA6YC8yTt6DeQ2E4xSml+oWbxO+BEw4HkN2CXpAwvN4ntd4A3gT2SknndZzzb2cxFSUgGOrhmhnhf0hu1nI+OTFm5ZxnLJki6eEuA2oMjgHTI8UDqdxOYgF+SNDp6bI8D0kdmARlQp0s6UtloorBx/G0/DRwCvgVWAC+WfjE85b4MITvqClsDsD2oTMDV7FfZyWQcD6yVlPrfT9oEmAnsK9ozV54u4/gGSWdu5cbWAEq8nyyN64emA22rAI0vS+3g/wDXALjSPdkqlta4AAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABxElEQVRYR+2VPWtUQRSGnxdBXQgBy4iFnUKwiVgYEUUsBCEkTYgWwX9gkV8gapvOVkXE1krxC0VCDFjZaMA/IUgghZFXDpnVy3g/d1kQvAMX7sLMPM99Z85Z2TZ/xpqk9cLvib+qF+gT+K8SsD0NnEjPSeD4RKvAtoA7wFkggDNZXX+cqEDAbJ8C3gNHSprKg5EEbM8BXyXttOlUtq8BT0rmrnUWsH0GeAtsA5clfa+TsD0LbFQkcKWTgO154CUwlaCfgAtVEg3w2OJYa4EEfwMMsi8ulaiAx//OLeAmcFDSVCuBGvjQJSQuSfqWLl5Z7AG/IelRuph3JS00CrSADyU+A+eBoyVn/hs+nGx7IGm3VsD2ReB5FvtPYAW4Dixlx/El1Xqx5P6CF9dUCiT4C+BQYcEesCzpqe0DwOMkU1UItfBYVCpQA1+U9KwQY3S6qO9IJB+N8FKB1LU2sy//EXEX4ZnEQ2C1YNAKXiVwD4jo4/xjBPyqpNeVOe/3/KFEa3jdEcS5h8S5JniWxH3gXZRamxZdKZBqOSROS/rQdrNR5jX2gVE27bKmF+gT+OcSeAVsdbnFY869nScw5n6dlx/uBX4BYsUyCW5nHFgAAAAASUVORK5CYII=\"","import React, { Component } from \"react\";\nimport { Collapse, Col, Button, Form, FormGroup, Label, Input } from \"reactstrap\";\nimport SubSig from \"../../scripts/EosSubSig\";\nimport scatter from \"../../scripts/Scatter\";\nimport Aws from \"../../scripts/Aws\";\nimport PCSServer from \"../../scripts/PCSServer\";\nimport ecc from 'eosjs-ecc';\nimport Base58 from \"bs58\";\nimport BigInteger from \"bigi\";\n\n// redux\nimport { connect } from \"react-redux\";\nimport { setAuthority } from \"../../redux/actions\";\n\nimport Airdrop from \"./Airdrop\"\n\nconst bin = (num) => Array.from(uint64ToBuffer(num));\n\nclass Password extends Component {\n    constructor(props) {\n        super(props);\n        \n        this.state = {\n            symbol:\"PTSD\"\n        };\n\n        this.toggle = this.toggle.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this.refreshKey = this.refreshKey.bind(this);\n        this.resetReduxAuthority = this.resetReduxAuthority.bind(this);\n    }\n\n    toggle() {\n        this.setState({ collapse: !this.state.collapse });\n    }\n\n    handleChange(e) {\n        this.setState({\n            [e.target.name]: e.target.value\n        });\n    }\n\n    refreshtoken(){\n        this.setState({symbol:this.state.symbol,nftId:this.state.nftId});\n    }\n\n    // パスワードを変更する\n    async refreshKey() {\n        const symbol = this.state.symbol;\n        const subsig = new SubSig(symbol);\n        const subsig2 = new SubSig(symbol);\n\n        // トークンIDを用いてEOSからトークンの所有者及び、subsig公開鍵を取得する\n        const nftId = this.state.nftId;\n        const oldPassWord = this.state.passWord;\n        const newPassWord = this.state.newpassWord;\n        alert(nftId+\"/\"+oldPassWord+\"/\"+newPassWord+\"/\"+symbol)\n        if(!nftId||!symbol||!oldPassWord){return window.alert(\"入力が足りません\")}\n\n        const { account, subkey } = await subsig.getEOSAuth(nftId);\n        const { privateKey, publicKey } = await subsig.genKeyPair(nftId, oldPassWord); \n\n        // パスワードから生成したsubkeyが一致した場合、つまり正しいパスワードの場合はパスワードを復元する\n        if (publicKey === subkey) {\n            const authority = {\n                id: nftId,\n                privateKey: privateKey\n            };\n\n            this.setState({\n                symbol:symbol,\n                nftId:nftId,\n                collapse: false,\n                passWord: \"\"\n            });\n\n            this.resetReduxAuthority();\n            window.alert(\"認証に成功しました。正解です！！\");\n            if(!newPassWord){return window.alert(\"新しい自分だけのパスワードをセットして下さい\")}\n\n        }else{ return window.alert(\"認証に失敗しました。\");}\n\n        const { privateKey2, new_subkey } = await subsig2.genKeyPair(nftId, newPassWord); \n\n        // 旧：アカウント名が代理人のアカウント名と等しい時\n        try {\n\n\t\tconst act_bin = bin(this.encodeName(\"refreshkey2\"));\n\t\tconst sym_bin = bin(getSymbolCodeRaw(symbol));\n\t\tconst id_bin = bin(new BigInteger(String(nftId)));\n\t\tconst sk_bin = publicKeyToBuffer(new_subkey);\n\t\tconst ts_bin = bin(getTimestamp());\n\t\tconst message_bin = [...act_bin, ...sym_bin, ...id_bin, ...sk_bin, ...ts_bin];\n\t\tconst message = Buffer(message_bin);\n                // デジタル署名\n                const new_signature = ecc.sign(message, privateKey);\n                \n\n                const apiObj = {\n                    AgentEvent: \"REFRESH\",\n                    symbolCode: symbol,\n                    tokenId: nftId,\n                    signature: new_signature,\n                    newSubKey: new_subkey\n                };\n\n                const signedTx = await PCSServer.requestSignTx(apiObj);\n\n        } catch (error) {\n            console.error(error);\n            return window.alert(\"認証に失敗しました。\");\n        }\n    }\n\n    // 前の認証情報を消すためreduxの認証情報を初期化する\n    resetReduxAuthority() {\n        const authority = {\n            symbol: null,\n            nftId: null,\n            accountName: null,\n            isManager: false\n        }\n        this.props.dispatch(setAuthority(authority));\n    }\n\n\n    render() {\n        return (\n            <Col xs=\"12\" className=\"p-3 mb-3 normal-shadow border-special\">\n\n                <Button onClick={this.toggle} style={{ marginBottom: '1rem' }} className=\"my-2\">行き先とパスワードを入力します</Button>\n\n                <Collapse isOpen={this.state.collapse}>\n                    <Form>\n                        <FormGroup>\n                            <Label for=\"symbol\">コミュニティ名</Label>\n                            <Input type=\"text\" name=\"symbol\" onChange={this.handleChange} value={this.state.symbol} />\n                        </FormGroup>\n\n                        <FormGroup>\n                            <Label for=\"nftId\">トークンID</Label>\n                            <Input type=\"number\" name=\"nftId\" onChange={this.handleChange} value={this.state.nftId} placeholder=\"トークンID\" />\n                        </FormGroup>\n\n                        <FormGroup>\n                            <Label for=\"passWord\">パスワード（解答）</Label>\n                            <Input type=\"password\" name=\"passWord\" onChange={this.handleChange}  placeholder=\"パスワード\" />\n                        </FormGroup>\n\n                        <FormGroup>\n                            <Label for=\"newpassWord\">あなたの新しいパスワード（任意）</Label>\n                            <Input type=\"password\" name=\"newpassWord\" onChange={this.handleChange}  placeholder=\"新しいパスワード\" />\n                        </FormGroup>\n                        <Button onClick={this.refreshKey}>確認/変更</Button>\n                    </Form>\n                </Collapse>\n            </Col>\n        );\n    }\n}\n\n// convert publicKey to a format suitable for use as an action argument\nfunction publicKeyToBuffer(public_key) {\n    const pk_prefix = \"EOS\";\n    const pk_body = public_key.slice(pk_prefix.length);\n    const raw_pk = Base58.decode(pk_body);\n    return Buffer([0, ...Array.from(raw_pk).slice(0, -4).map(v => +v)]);\n}\n\n// convert uint64 value to a format suitable for use as an action argument\nfunction uint64ToBuffer(num) {\n    const bn = BigInteger.isBigInteger(num) ? num : new BigInteger(num);\n    const two = new BigInteger(\"2\");\n    const a_byte = two.pow(8);\n    const bytearray = Array.from({ length: 8 }, (v, i) => Number(bn.divide(two.pow(8 * i)).remainder(a_byte)));\n    console.log(\"bytearray:\", bytearray);\n    return Buffer(bytearray);\n}\n\n// convert symbol_code value to a format suitable for use as an action argument\nfunction getSymbolCodeRaw(symbol_code) {\n    if (typeof (symbol_code) !== \"string\") {\n        throw new Error(\"the first argument should be string type\");\n    }\n\n    if (symbol_code.length > 7) {\n        throw new Error(\"string is too long to be a valid symbol_code\");\n    }\n\n    let raw = new BigInteger(\"0\");\n    const a_byte = new BigInteger(\"256\");\n    for (let i = symbol_code.length - 1; i >= 0; i--) {\n        const c = symbol_code[i];\n        if (c < 'A' || 'Z' < c) {\n            throw new Error(\"only uppercase letters allowed in symbol_code string\");\n        }\n\n        raw = raw.multiply(a_byte);\n        raw = raw.add(new BigInteger(c.charCodeAt().toString()));\n    }\n\n    return raw;\n}\n\n// get timestamp for action data\nfunction getTimestamp() {\n    const duration = 15 * 1000;\n    const now = Number(new Date());\n    const timestamp = Math.floor(now / duration) * duration;\n    const timestamp_bn = new BigInteger(timestamp.toString());\n    const timstamp_micro = timestamp_bn.multiply(new BigInteger(\"1000\"));\n    console.log(\"timestamp:\", timstamp_micro.toString());\n    return timstamp_micro;\n}\n\n\nexport default connect()(Password);\n","'use strict'\n\nexport const AWS_SECURITY_API_URL = \"https://78qy7hxmjd.execute-api.ap-northeast-1.amazonaws.com/pcsSecurityMain\";\nexport const NEW_AWS_API_URL = \"https://85z0ywf1ol.execute-api.ap-northeast-1.amazonaws.com/secretHashing0\";\nexport const CONTRACT_ACCOUNT = \"pcscoreprtcl\";\nexport const AGENT_ACCOUNT = \"pcscoreagent\";\n","'use strict'\n\nimport ecc from 'eosjs-ecc';\nimport { NEW_AWS_API_URL, AWS_SECURITY_API_URL, CONTRACT_ACCOUNT } from \"./config\";\n\nexport default class PCSServer {\n\n    static async checkByPCSSecurity(symbol, tokenId, sig, message) {\n        const apiUrl = AWS_SECURITY_API_URL + \"/pcssecurity\";\n\n        const payload = {\n            \"name\": \"checkSig\",\n            \"symbol\": symbol,\n            \"tokenId\": tokenId,\n            \"contract\": CONTRACT_ACCOUNT,\n            \"sig\": sig,\n            \"message\": message\n        };\n\n        const req = {\n            method: \"POST\",\n            mode: \"cors\",\n            cache: \"no-cache\",\n            headers: { \"Content-Type\": \"application/json; charset=utf-8\" },\n            body: JSON.stringify(payload)\n        };\n\n        const res = await (await fetch(apiUrl, req)).json();\n        return res;\n    }\n\n    static async requestSignTx(query) {\n        const apiUrl = AWS_SECURITY_API_URL + \"/eosagent\"\n        const options = {\n            method: \"POST\",\n            body: JSON.stringify(query)\n        };\n\n        const response = await fetch(apiUrl, options);\n        const data = await response.json();\n\n        if (data.errorMessage) {\n            console.error(JSON.parse(data.errorMessage));\n            throw new Error(`the request to ${apiUrl} is failed`);\n        }\n\n        try {\n            const signedTx = data.signedTransaction.transaction;\n            return signedTx;\n        } catch (error) {\n            console.error(error);\n        }\n    }\n\n    static async genSalt(password, symbol, nftId) {\n        const seedHash = ecc.sha256(password);\n\n        const apiUrl = NEW_AWS_API_URL + `?tokenId=${nftId}&hash=${seedHash}&symbol=${symbol}`;\n        const response = await (await fetch(apiUrl, { method: \"GET\", mode: \"cors\" })).json();\n        const salt = response.body;\n        return salt;\n    }\n}\n","import ScatterJS from 'scatterjs-core';\nimport ScatterEOS from 'scatterjs-plugin-eosjs';\nimport Eos from \"eosjs\";\n\nexport class Scatter {\n\n    /**\n     * constructor\n     * @param {string} node_url EOS-node url \n     * @param {*} port EOS-node port number\n     * @param {*} chain EOS-chain name. Please choose one from [\"mainnet\", \"kylin\", \"jungle\"].\n     */\n    constructor(node_url = \"https://nodes.get-scatter.com\", port = \"443\", chain = \"mainnet\") {\n        const chainID = {\n            \"mainnet\": \"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906\",\n            \"kylin\": \"5fff1dae8dc8e2fc4d5b23b2c7665c97f9e9d8edf2b6485a86ba311c25639191\",\n            \"jungle\": \"038f4b0fc8ff18a4f0842a8f0564611f6e96e8535901dd45e43ac8691a1c4dca\"\n        }\n        const re = new RegExp(\"(http(s)?://)?([\\\\w-]+\\\\.)+[\\\\w-]+(/[\\\\w- ./?%&=]*)?\", \"gi\");\n        if (node_url.match(re)) {\n            const [protocol, host] = node_url.split(\"://\");\n            this.network = {\n                blockchain: \"eos\",\n                protocol: protocol,\n                host: host,\n                port: port,\n                chainId: chainID[chain]\n            }\n\n            this.eosOptions = { expireInSeconds: 60 };\n            this.requiredFields = { accounts: [this.network] };\n\n            // ScatterJS setup\n            ScatterJS.plugins(new ScatterEOS());\n            this.scatter = ScatterJS.scatter;\n            this.eosJS = this.scatter.eos(this.network, Eos, this.eosOptions); // eosjs@16.0.9 instance\n            this.connected = false; // Scatter exists and is unlocked.\n\n        } else {\n            throw new Error(\"this network is invalid. Please try again.\");\n        }\n    }\n\n    /**\n     * connect this instance to Scatter-client.\n     * this method is scatter unique and needs to be executed.\n     * @param {string} appName the name of the application. It can be set freely.\n     */\n    async connect(appName) {\n        this.connected = await ScatterJS.scatter.connect(appName); // if Scatter is unlocked , this become true.\n\n        if (!this.connected) {\n            return setTimeout(this.connect(appName), 2000);\n        }\n    }\n\n    /**\n     * set Account to this instance\n     * To make a action, you need to execute this method to store the appropriate account in the account property.\n     */\n    async login() {\n        if (!this.scatter || !this.scatter.identity) {\n            // login\n            try {\n                await this.scatter.login(this.requiredFields);\n            }\n            catch (error) {\n                throw new Error(error);\n            }\n        }\n\n        if (!this.account) {\n            // When logged in but no account is set\n            try {\n                this.account = this.scatter.identity.accounts.find(x => x.blockchain === 'eos');\n            }\n            catch {\n                throw new Error(\"Account is not found. Please try again.\");\n            }\n        }\n    }\n\n    /**\n     * logout from app \n     */\n    async logout() {\n        const res = this.scatter.logout();\n        return res;\n    }\n\n    /**\n     * set requireFields\n     * this method is scatter unique\n     * @param {string} key requireFields key name\n     * @param {any} content requireFields value\n     */\n    setRequiredFields(key, content) {\n        this.requiredFields = Object.assign({}, this.requiredFields, {\n            [key]: content\n        });\n    }\n\n    /**\n     * set transaction option \n     * @param {string} key option key name\n     * @param {any} content option value\n     */\n    setTxOptions(key, content) {\n        this.eosOptions = Object.assign({}, this.eosOptions, {\n            [key]: content\n        });\n    }\n\n    /**\n     * send a action\n     * @param  {Object} action\n     *     action = {\n     *         contractName : \"CONTRACT_NAME\",\n     *         actionName: \"ACTION_NAME\",\n     *         params: [params]\n     *     }\n     */\n    async action({ contractName, actionName, params }) {\n        try {\n            const txOptions = { authorization: [`${this.account.name}@${this.account.authority}`] };\n            const contract = await this.eosJS.contract(contractName, { \"requiredFields\": this.requiredFields });\n            const res = await contract[actionName](...params, txOptions);\n            return res;\n        }\n        catch (error) {\n            if (typeof(error) == \"object\") {\n                this._scatterError(error);\n            } else {\n                throw new Error(error);\n            }\n        }\n    }\n\n    /**\n     * send a transaction\n     * @param  {Object} action\n     *     action = {\n     *         contractName : \"CONTRACT_NAME\",\n     *         actionName: \"ACTION_NAME\",\n     *         params: [params]\n     *     }\n     */\n    async transaction(...actionList) {\n        try {\n            const txOptions = { authorization: [`${this.account.name}@${this.account.authority}`] };\n            const contractList = actionList.map((act) => { return act.contractName });\n            const res = await this.eosJS.transaction(contractList, (tx) => {\n                actionList.forEach((act) => {\n                    const contractName = act.contractName.replace(\".\", \"_\"); // dots cannot be used in method name\n                    tx[contractName][act.actionName](...act.params, txOptions);\n                })\n            });\n            return res;\n        }\n        catch (error) {\n            if (typeof (error) == \"object\") {\n                this._scatterError(error);\n            } else {\n                throw new Error(error);\n            }\n        }\n    }\n\n    /**\n     * send EOS to recipient\n     * @param {string} recipient recipient account name\n     * @param {number} amount eos amount\n     * @param {string} memo text message\n     */\n    async send(recipient, amount, memo) {\n        try {\n            const eosAmount = Scatter.numToAsset(amount);\n            const actObj = {\n                contractName : \"eosio.token\",\n                actionName: \"transfer\",\n                params: [this.account.name, recipient, eosAmount, memo]\n            }\n            const res = await this.action(actObj);\n            return res\n        }\n        catch (error) {\n            if (typeof (error) == \"object\") {\n                this._scatterError(error);\n            } else {\n                throw new Error(error);\n            }\n        }\n    }\n\n    /**\n     * convert a number data to eos asset data \n     * If you enter 1 for this function, a value of \"1.0000 EOS\" is output.\n     * @param {number} amount token amount\n     * @param {number} decimal token decimal\n     * @param {string} symbol token symbol\n     */\n    static numToAsset(amount, decimal=4 ,symbol=\"EOS\") {\n        const re = new RegExp(\"^([1-9]\\\\d*|0)(\\\\.\\\\d+)?$\", \"gi\"); // check if the type is unsigned float.\n\n        if (String(amount).match(re)) {\n            const eos_amount = String(amount.toFixed(decimal)) + ` ${symbol}`;\n            return eos_amount\n        } else {\n            throw new Error(\"amount can only be an unsigned decimal.\")\n        }\n    }\n\n    /**\n     * process scatter error object\n     * @param {object} errorObj scatter error object\n     */\n    _scatterError(errorObj) {\n        throw new Error(`${errorObj.type}  ${errorObj.message}`);\n    }\n}\n\nlet scatter = new Scatter(process.env.REACT_APP_HOST_DOMAIN, 443, \"kylin\");\n\n(async () => {\n    await scatter.connect(\"Ryodan\");\n})()\n\nexport default scatter;","/* eslint react/no-multi-comp: 0, react/prop-types: 0 */\n\nimport React from 'react';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport Aws from \"../../scripts/Aws\";\nimport PropTypes from 'prop-types';\n\nconst propTypes = {\n  refreshtoken: PropTypes.func,\n};\n\n\nclass Airdrop extends React.Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      modal: false,\n      ptag:[],\n      text:\"\",\n      symbol:\"\",\n      modaltitle:\"\"\n    };\n\n    this.toggle = this.toggle.bind(this);\n  }\n\n  refreshtoken(){\n    this.props.refreshtoken();\n    this.setState({symbol:this.props.symbol,nftId:this.props.nftId})\n  }\n\n  async toggle() {\n    \n    this.refreshtoken();\n    if(!this.props.symbol ||this.props.symbol.length<3){\n        return window.alert(\"先に下でパスワードとトークンIDを入れて下さい。紹介IDは空で大丈夫です！！\")\n    }\n\n    if(!this.state.modal){\n      let new_text = await this.set_text()\n      if(new_text){\n        this.setState({\n          modal: true\n        });\n      }\n    }else{\n      this.setState({\n        modal: false\n      });\n    }\n  }\n\n  async set_text(){\n    let droplist = await Aws.getNoticeLink(this.state.symbol,this.state.nftId)\n    if (droplist){\n      console.log(droplist)\n      this.setState({\n        modaltitle:droplist[0],\n        ptag: droplist[1]\n      });\n      return true;\n    }else{return false;}\n  }\n\n  render() {\n    return (\n      <div>\n        <Button color=\"danger\" onClick={this.toggle}>通知GET</Button>\n        <Modal isOpen={this.state.modal} toggle={this.toggle} className={this.props.className}>\n          <ModalHeader toggle={this.toggle}>通知</ModalHeader>\n          <ModalBody>\n            <h3>{this.state.modaltitle}</h3>\n              {\n                this.state.ptag.map((sentence) => {\n                  return (\n                    <h4>{sentence}</h4>\n                  )\n                })\n              }\n          </ModalBody>\n          <ModalFooter>\n            <Button color=\"secondary\" onClick={this.toggle}>Close</Button>\n          </ModalFooter>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nAirdrop.propTypes = propTypes;\nexport default Airdrop;\n","import React, { Component } from 'react';\nimport { Link } from \"react-router-dom\";\nimport \"./Header.css\";\nimport { connect } from \"react-redux\";\nimport { Container, Row, Col } from \"reactstrap\";\nimport { switchCommunityContents } from \"../../redux/actions\"\n\nimport home from \"../../img/home.png\";\nimport lobby from \"../../img/chat.png\";\nimport graph from \"../../img/graph.png\";\n\nclass Header extends Component {\n\n    constructor(props) {\n        super(props);\n        this.switchHeader = this.switchHeader.bind(this);\n        this.switchLobby = this.switchLobby.bind(this);\n        this.switchDex = this.switchDex.bind(this);\n    }\n\n    // Redux関数\n    switchLobby() {\n        this.props.dispatch(switchCommunityContents(\"lobby\"));\n    }\n    // Redux関数\n    switchDex() {\n        this.props.dispatch(switchCommunityContents(\"dex\"));\n    }\n\n    // ロビー内にいるときと、そうでないときでヘッダーで表示する内容を入れ替えるための関数\n    switchHeader(bool) {\n        if (bool) {\n            // ロビー内にいるとき\n            return (\n                <Row className=\"justify-content-between\">\n                    <Col xs=\"4\" tag={Link} to=\"/\" style={{ textDecoration: 'none' }} className=\"special-color\"><input id=\"home-icon\" type=\"image\" src={home} alt=\"home\" /></Col>\n                    <Col xs=\"4\" className=\"special-color\" onClick={this.switchLobby}><input id=\"chat-icon\" type=\"image\" src={lobby} alt=\"lobby\" /></Col>\n                    <Col xs=\"4\" className=\"special-color\" onClick={this.switchDex}><input id=\"graph-icon\" type=\"image\" src={graph} alt=\"graph\" /></Col>\n                </Row>\n            );\n        } else {\n            // ロビー外つまりエントランスにするとき\n            return (\n                <Row>\n                    <Col xs=\"12\">\n                        <Link to=\"/\" style={{ textDecoration: 'none' }} className=\"special-color\">Linkえあどろっぷ</Link>\n                    </Col>\n                </Row>\n            );\n        }\n    }\n\n    render() {\n        const inCommunity = (this.props.symbol !== \"\") ? true : false;\n        return (\n            <div className=\"header\">\n                <Container>\n                    {this.switchHeader((inCommunity))}\n                </Container>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        symbol: state.community.symbol\n    };\n};\n\nexport default connect(mapStateToProps)(Header);\n","import React, { Component } from \"react\";\nimport { Container, Row } from \"reactstrap\";\nimport { connect } from \"react-redux\";\nimport Password from \"./Password\";\n\nclass Setting extends Component {\n    render() {\n        const symbol = this.props.symbol ? this.props.symbol : \"\";\n        const nftId = this.props.nftId ? this.props.nftId : \"\";\n\n        return (\n            <div className=\"setting\">\n                <Container className=\"py-4\">\n                    <Row>\n                        <div>\n                            <h2>{\"CONTROL PANEL\"}</h2>\n                        </div>\n\n                        <Password symbol={symbol} id={nftId} />\n\n                    </Row>\n                </Container>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        symbol: state.authority.symbol,\n        nftId: state.authority.nftId\n    };\n};\n\nexport default connect(mapStateToProps)(Setting);\n","import React, { Component } from 'react';\nimport './App.css';\nimport \"./Dark.css\";\nimport \"./White.css\";\nimport setting from \"./img/setting.png\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { switchSetting, setPrice } from \"./redux/actions\";\nimport Header from \"./Component/Header/Header\";\nimport Setting from \"./Component/Setting/Setting\";\nimport Aws from \"./scripts/Aws\";\n\nclass App extends Component {\n\n  switchSetting() {\n    this.props.dispatch(switchSetting());\n  }\n\n  render() {\n    return (\n      <Router>\n        {/* テーマでクラスが変わる */}\n        <div className={this.props.darkMode ? \"dark-mode\" : \"white-mode\"}>\n\n          {/* ヘッダー */}\n          <Header />\n\n          {/* reduxのsettingによって設定画面かコンテンツを表示するか変更する */}\n          {<Setting />}\n\n          {/* 設定アイコン */}\n          <input id=\"setting-icon\" type=\"image\" src={setting} alt=\"setting\" onClick={this.switchSetting} />\n          \n        </div>\n      </Router>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    darkMode: state.darkMode.darkMode,\n    setting: state.setting.setting\n  };\n};\n\nexport default connect(mapStateToProps)(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { combineReducers } from \"redux\";\n\n// ダークモードにするか否かを担うreducer\n// ローカルに設定が保存されているならそれを読み込む\nexport function darkMode(state={\n    darkMode: (localStorage.getItem(\"theme\") ? JSON.parse(localStorage.getItem(\"theme\")) : false)\n}, action) {\n    switch(action.type) {\n        case \"SWITCH_THEME\":\n            const theme = !state.darkMode;\n            localStorage.setItem(\"theme\", theme); // ローカルに設定を保存\n            return Object.assign({}, state, {\n                darkMode: theme\n            });\n            \n        default:\n            return state;\n    }\n}\n\n// どのコミュニティにいるかを管理する\n// エントランスは\"\"とする\nexport function community(state={\n    symbol: \"\"\n}, action) {\n    switch (action.type) {\n        case \"SWITCH_COMMUNITY\":\n            return Object.assign({}, state, {\n                symbol: action.symbol\n            });\n\n        default:\n            return state;\n    }\n}\n\n// 各部屋内にいるときのヘッダーでチャット、DEXを押したときにコンテンツを切り替えるreducer\nexport function communityContents(state = {\n    lobby: true,\n    dex: false\n}, action) {\n    switch (action.type) {\n        case \"SWITCH_COMMUNITY_CONTENTS\":\n            if (action.newState === \"lobby\") {\n                return Object.assign({}, state, {\n                    lobby: true,\n                    dex: false\n                });\n            } else if (action.newState === \"dex\") {\n                return Object.assign({}, state, {\n                    lobby: false,\n                    dex: true\n                });\n            } else {\n                return state;\n            }\n\n        default:\n            return state;\n    }\n}\n\n// ログイン情報を管理するreducer\nexport function authority(state = {\n    symbol: null,\n    nftId: null,\n    accountName: null,\n    isManager: false\n}, action) {\n    switch (action.type) {\n        case \"SET_ACCOUNT_INFO\":\n            return Object.assign({}, state, {\n                symbol: action.newState.symbol,\n                nftId: action.newState.nftId,\n                accountName: action.newState.accountName,\n                isManager: action.newState.isManager\n            });\n\n        default:\n            return state;\n    }\n}\n\n// チャット情報を管理するreducer\nexport function chat(state = {\n}, action) {\n    switch (action.type) {\n        case \"SET_CHAT_THREAD\":\n            return Object.assign({}, state, {\n                [action.newState.symbol]: action.newState.thread\n            });\n\n        default:\n            return state;\n    }\n}\n\n// チャット情報を管理するreducer\nexport function contents(state = {\n}, action) {\n    switch (action.type) {\n        case \"SET_CONTENTS\":\n            return Object.assign({}, state, {\n                [action.newState.symbol]: action.newState.contents\n            });\n\n        default:\n            return state;\n    }\n}\n\n// 設定画面\nexport function setting(state={\n    setting : false\n}, action) {\n    switch (action.type) {\n        case \"SWITCH_SETTING\":\n            return Object.assign({}, state, {\n                setting: !state.setting\n            });\n        default:\n            return state;\n    }\n}\n\n// プロフィール\nexport function profile(state={\n    modal: false,\n    symbol: \"\",\n    accountName : \"\",\n    nftId : \"\",\n    iconUrl : \"\",\n    biography: \"\"\n}, action) {\n    switch (action.type) {\n        case \"OPEN_PROFILE\":\n            return Object.assign({}, state, {\n                modal : true,\n                symbol : action.profile.symbol,\n                accountName : action.profile.accountName,\n                nftId : action.profile.nftId,\n                iconUrl : action.profile.iconUrl,\n                biography : action.profile.biography\n            });\n        case \"CLOSE_PROFILE\":\n            return Object.assign({}, state, {\n                modal : false\n            });\n        default:\n            return state;\n    }\n}\n\n// 価格に関するもの\nexport function price(state = {\n    eosjpy : \"\",\n    nfteos : \"\",\n    nftjpy : \"\"\n}, action) {\n    switch (action.type) {\n        case \"SET_PRICE\":\n            return Object.assign({}, state, {\n                [action.key] : action.value \n            });\n        default:\n            return state;\n    }\n}\n\n// 共有モーダル\nexport function share(state = {\n    modal: false,\n    url: \"\",\n    title: \"\"\n}, action) {\n    switch (action.type) {\n        case \"OPEN_SHARE\":\n            return Object.assign({}, state, {\n                modal: true,\n                url: action.url,\n                title: action.title\n            });\n        case \"CLOSE_SHARE\":\n            return Object.assign({}, state, {\n                modal: false\n            });\n        default:\n            return state;\n    }\n}\n\nexport default combineReducers({\n    darkMode,\n    community,\n    communityContents,\n    authority,\n    chat,\n    contents,\n    setting,\n    profile,\n    price,\n    share\n});","import { createStore } from \"redux\";\nimport reducers from \"./reducers\";\n\nconst store = createStore(reducers);\n\nexport default store;","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport './bootstrap.min.css';\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { Provider } from \"react-redux\";\nimport store from \"./redux/store\";\n\nReactDOM.render(\n    <Provider store={store}>\n        <App />\n    </Provider>,\ndocument.getElementById(\"root\"));\n\nserviceWorker.unregister();\n","import { asyncAll } from \"./Util\";\nimport { getTokenInfo } from \"./EosHttpApi\";\nimport ecc from \"eosjs-ecc\"; \n\nconst AWS_API_URL = process.env.REACT_APP_AWS_API_URL;\n\n// Awsサーバーからデータを取ってくる処理をまとめたもの\nexport default class Aws {\n\n    // コミュニティデータを取得する\n    static async getCmntyList() {\n        const url = AWS_API_URL + \"/community\";\n        const response = await fetch(url, { method: \"GET\", mode: \"cors\" });\n        const community = await response.json();\n        return community;\n    }\n\n    // URLページのタイトルを取得する\n    static async title(pageUrl) {\n        const url = AWS_API_URL + `/title?url=${pageUrl}`;\n        const response = await fetch(url, { method: \"GET\", mode: \"cors\" });\n        const title = await response.json();\n        return title;\n    }\n\n    static async sendPermissionLink(payload) {\n        const apiUrl = \" https://78qy7hxmjd.execute-api.ap-northeast-1.amazonaws.com/proxyStage1/submitlink\";\n        const req = {\n            method: \"POST\",\n            mode: \"cors\",\n            cache: \"no-cache\",\n            headers: { \"Content-Type\": \"application/json; charset=utf-8\" },\n            body: JSON.stringify(payload)\n        };\n\n        const res = await (await fetch(apiUrl, req)).json();\n        console.log(res)\n        alert(\"[紹介コードは次のとおりです。必ずコピーして保存して下さい]\")\n        alert(\"紹介コード:\"+res.body)\n    }\n\n    static async getNoticeLink(symbol,nftId) {\n        if(!symbol || symbol.length<3){return false}\n        const apiUrl = \"https://78qy7hxmjd.execute-api.ap-northeast-1.amazonaws.com/proxyStage1/getnoticelink\";\n        const req = {\n            method: \"POST\",\n            mode: \"cors\",\n            cache: \"no-cache\",\n            headers: { \"Content-Type\": \"application/json; charset=utf-8\" },\n            body: JSON.stringify({\"sym\":symbol})\n        };\n\n        const res = await (await fetch(apiUrl, req)).json();\n        if(!res.body){return window.alert(\"通知の取得に失敗しました\")}\n        const data = JSON.parse(res.body)\n           \n        let ptag = [];\n        let noticecount =0;\n        data.forEach(function(d){\n          if(d.morethan>nftId && d.lessthan<nftId){return false};\n          if(d.list.indexOf(String(nftId))===-1&&d.list!==\",\"){return false};\n          const datetime = String(d.datetime)\n          ptag.push( \"紹介ID:　　\"+d.indexhash+\"　　|　\"+datetime.slice(4,6)+\"月\"+datetime.slice(6,8) +\"日\")\n          noticecount += 1;\n        })\n        let title = noticecount+ \"件エアドロップの通知があります\";\n\n\n        return [title,ptag]\n\n    }\n\n    // コミュニティのセキュリティチェック\n    static async getRedirectPermission(payload) {\n        const apiUrl = \"https://78qy7hxmjd.execute-api.ap-northeast-1.amazonaws.com/proxyStage1/proxysecurity\";\n\n        const req = {\n            method: \"POST\",\n            mode: \"cors\",\n            cache: \"no-cache\",\n            headers: { \"Content-Type\": \"application/json; charset=utf-8\" },\n            body: JSON.stringify(payload)\n        };\n\n        const res = await (await fetch(apiUrl, req)).json();\n        if(res.redirect){window.location.href=res.redirect;}\n    }\n\n\n    // パスワードから生成したhashとsymbol,nftIdを使ってSaltを作る\n    static async genSalt(password, symbol, nftId) {\n        const seedHash = ecc.sha256(password);\n\n        const apiUrl = \"https://85z0ywf1ol.execute-api.ap-northeast-1.amazonaws.com/secretHashing0\";\n        const apiObj = {\n            \"hash\": seedHash,\n            \"symbol\": symbol,\n            \"tokenId\": nftId\n        };\n        const req = {\n            method: \"POST\",\n            mode: \"cors\",\n            cache: \"no-cache\",\n            headers: { \"Content-Type\": \"application/json; charset=utf-8\" },\n            body: JSON.stringify(apiObj)\n        };\n\n        const salt = await (await fetch(apiUrl, req)).json();\n        return salt.body;\n    }\n}\n","export function switchTheme() {\n    return ({\n        type: \"SWITCH_THEME\"\n    });\n}\n\nexport function switchCommunity(symbol) {\n    return ({\n        type: \"SWITCH_COMMUNITY\",\n        symbol\n    });\n}\n\nexport function switchCommunityContents(newState) {\n    return ({\n        type: \"SWITCH_COMMUNITY_CONTENTS\",\n        newState\n    });\n}\n\nexport function setAuthority(newState) {\n    return ({\n        type: \"SET_ACCOUNT_INFO\",\n        newState\n    });\n}\n\nexport function setChatThread(newState) {\n    return ({\n        type: \"SET_CHAT_THREAD\",\n        newState\n    });\n}\n\nexport function setContents(newState) {\n    return ({\n        type: \"SET_CONTENTS\",\n        newState\n    });\n}\n\nexport function switchSetting() {\n    return ({\n        type: \"SWITCH_SETTING\"\n    });\n}\n\nexport function openProfile(profile) {\n    return ({\n        type: \"OPEN_PROFILE\",\n        profile\n    });\n}\n\nexport function closeProfile() {\n    return ({\n        type: \"CLOSE_PROFILE\"\n    });\n}\n\nexport function setPrice(key, value) {\n    return ({\n        type: \"SET_PRICE\",\n        key, value\n    });\n}\n\nexport function openShare(url, title) {\n    return ({\n        type: \"OPEN_SHARE\",\n        url,\n        title\n    });\n}\n\nexport function closeShare() {\n    return ({\n        type: \"CLOSE_SHARE\"\n    });\n}","// EosのHttpAPIに関する関数をまとめたもの\n\n// EOSテーブルから情報を取得する\nexport async function getTable(query) {\n    const url = process.env.REACT_APP_HOST_DOMAIN + \"/v1/chain/get_table_rows\";\n    const req = {\n        method: \"POST\",\n        mode: \"cors\",\n        body: JSON.stringify({ \"json\": true, ...query })\n    };\n\n    // EOSのAPIをたたく\n    let response = await fetch(url, req);\n    let result = await response.json();\n    return result;\n}\n\n// トークン情報を取得する\nexport async function getTokenInfo(symbol, nftId) {\n    const code = process.env.REACT_APP_CONTRACT_ACCOUNT;\n    const query = {\n        \"code\": code,\n        \"scope\": symbol,\n        \"table\": \"token\",\n        \"lower_bound\": nftId,\n        \"upper_bound\": nftId,\n        \"limit\": 1\n    };\n    const response = await getTable(query);\n    \n    if (response.rows.length === 1) {\n        return response.rows[0];  // e.g: {id: 0, subkey: \"EOS11...\", owner: \"toycashio123\", active: 1}\n    } else {\n        console.error(\"対応するトークンが存在しません。\");\n        return null;\n    }\n}\n\n// コンテンツ一覧を取得する\nexport async function getContents(symbol) {\n    const code = process.env.REACT_APP_CONTRACT_ACCOUNT;\n    const query = {\n        \"code\": code,\n        \"scope\": symbol,\n        \"table\": \"contents\"\n    };\n    let result = await getTable(query); // Web Apiを使ってTableの内容を取得\n    let response = result.rows;\n    return response;\n}\n\n// 運営のトークンID一覧を取得する\nexport async function getManager(symbol) {\n    const code = process.env.REACT_APP_CONTRACT_ACCOUNT;\n    const query = {\n        \"code\": code,\n        \"scope\": symbol,\n        \"table\": \"manager\"\n    };\n    let result = await getTable(query); // Web Apiを使ってTableの内容を取得\n    let response = result.rows;\n    return response;\n}"],"sourceRoot":""}